{"ast":null,"code":"import Nav from \"@/views/inc/Nav.vue\";\nexport default {\n  name: \"userManage\",\n  components: {\n    Nav\n  },\n\n  data() {\n    return {\n      dialogVisible: false,\n      ruleForm: {},\n      editRules: {\n        name: [{\n          required: true,\n          message: '请输入姓名',\n          trigger: 'blur'\n        }],\n        id: [{\n          required: true,\n          message: '请输入学号/工号',\n          trigger: 'change'\n        }, {\n          type: 'number',\n          message: '输入只能为数字'\n        }],\n        idNumber: [{\n          required: true,\n          message: '请输入身份证号',\n          trigger: 'change'\n        }],\n        role: [{\n          required: true,\n          message: '请选择角色',\n          trigger: 'blur'\n        }]\n      },\n      tableData: [{\n        role: '管理员',\n        name: 'admin',\n        id: '12345678901',\n        idNumber: '123456789012345678',\n        phoneNumber: '12345678901',\n        email: '12345678901@fudan.edu.cn'\n      }]\n    };\n  },\n\n  created() {},\n\n  methods: {\n    getUserForm() {\n      this.$axios.get(\"/sys/menu/list\").then(res => {\n        this.tableData = res.data.data;\n      });\n    },\n\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.$axios.post('/sys/menu/' + (this.ruleForm.id ? 'update' : 'save'), this.ruleForm).then(res => {\n            this.$message({\n              showClose: true,\n              message: '添加成功',\n              type: 'success'\n            });\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAiFI,OAAOA,GAAP,MAAgB,qBAAhB;AACA,eAAe;AACXC,MAAI,EAAE,YADK;AAEXC,YAAU,EAAC;AACPF;AADO,GAFA;;AAKXG,MAAI,GAAE;AACF,WAAM;AACFC,mBAAa,EAAC,KADZ;AAEFC,cAAQ,EAAC,EAFP;AAKFC,eAAQ,EAAI;AACRL,YAAI,EAAE,CACF;AAAEM,kBAAQ,EAAE,IAAZ;AAAkBC,iBAAO,EAAE,OAA3B;AAAoCC,iBAAO,EAAE;AAA7C,SADE,CADE;AAIRC,UAAE,EAAE,CACA;AACIH,kBAAQ,EAAE,IADd;AAEIC,iBAAO,EAAE,UAFb;AAGIC,iBAAO,EAAE;AAHb,SADA,EAMA;AAAEE,cAAI,EAAC,QAAP;AAAgBH,iBAAO,EAAC;AAAxB,SANA,CAJI;AAYRI,gBAAQ,EAAE,CACN;AACIL,kBAAQ,EAAE,IADd;AAEIC,iBAAO,EAAE,SAFb;AAGIC,iBAAO,EAAE;AAHb,SADM,CAZF;AAmBRI,YAAI,EAAE,CACF;AACIN,kBAAQ,EAAE,IADd;AAEIC,iBAAO,EAAE,OAFb;AAGIC,iBAAO,EAAE;AAHb,SADE;AAnBE,OALV;AAgCFK,eAAQ,EAAI,CACR;AACID,YAAI,EAAE,KADV;AAEIZ,YAAI,EAAE,OAFV;AAGIS,UAAE,EAAC,aAHP;AAIIE,gBAAQ,EAAC,oBAJb;AAKIG,mBAAW,EAAC,aALhB;AAMIC,aAAK,EAAC;AANV,OADQ;AAhCV,KAAN;AA2CH,GAjDU;;AAkDXC,SAAO,GAAE,CAER,CApDU;;AAsDXC,SAAO,EAAC;AACJC,eAAW,GAAE;AACT,WAAKC,MAAL,CAAYC,GAAZ,CAAgB,gBAAhB,EAAkCC,IAAlC,CAAuCC,GAAG,IAAE;AACxC,aAAKT,SAAL,GAAeS,GAAG,CAACpB,IAAJ,CAASA,IAAxB;AACH,OAFD;AAGH,KALG;;AAMJqB,cAAU,CAACC,QAAD,EAAU;AAChB,WAAKC,KAAL,CAAWD,QAAX,EAAqBE,QAArB,CAA+BC,KAAD,IAAS;AACnC,YAAGA,KAAH,EAAS;AACL,eAAKR,MAAL,CAAYS,IAAZ,CAAiB,gBAAc,KAAKxB,QAAL,CAAcK,EAAd,GAAiB,QAAjB,GAA0B,MAAxC,CAAjB,EAAiE,KAAKL,QAAtE,EACCiB,IADD,CACMC,GAAG,IAAE;AACP,iBAAKO,QAAL,CAAc;AACVC,uBAAS,EAAE,IADD;AAEVvB,qBAAO,EAAE,MAFC;AAGVG,kBAAI,EAAE;AAHI,aAAd;AAKA,WAPJ;AASJ;AACH,OAZD;AAaJ;;AApBI;AAtDG,CAAf","names":["Nav","name","components","data","dialogVisible","ruleForm","editRules","required","message","trigger","id","type","idNumber","role","tableData","phoneNumber","email","created","methods","getUserForm","$axios","get","then","res","submitForm","formName","$refs","validate","valid","post","$message","showClose"],"sourceRoot":"","sources":["E:\\Git\\Git\\ss2022_group16\\Lab2\\vueadmin-vue\\src\\views\\userManage.vue"],"sourcesContent":["<template>\r\n    <head>\r\n        <meta charset=\"UTF-8\">\r\n        <title>教师/学生信息录入</title>\r\n    </head>\r\n    <body>\r\n    <Nav></Nav>\r\n    <div class=\"void\">\r\n        <span></span>\r\n    </div>\r\n    <div class=\"showlist\">\r\n        <el-form :inline=\"true\" >\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"dialogVisible=true\">添加</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n        <el-table :data=\"tableData\" border stripe style=\"width: 100%\">\r\n            <el-table-column prop=\"role\" label=\"角色\" width=\"100px\" />\r\n            <el-table-column prop=\"name\" label=\"姓名\" width=\"100px\" />\r\n            <el-table-column prop=\"id\" label=\"学号/工号\" width=\"120px\"/>\r\n            <el-table-column prop=\"idNumber\" label=\"身份证号\" />\r\n            <el-table-column prop=\"phoneNumber\" label=\"手机号\" width=\"120px\"/>\r\n            <el-table-column prop=\"email\" label=\"邮箱\" />\r\n            <el-table-column prop=\"icon\" label=\"操作\" >\r\n            <div>\r\n                <el-button type=\"text\">编辑</el-button>\r\n                <el-popconfirm title=\"确认删除吗？\">\r\n                    <template #reference>\r\n                        <el-button type=\"text\">删除</el-button>\r\n                    </template>\r\n                </el-popconfirm>\r\n            </div>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <el-dialog\r\n                v-model=\"dialogVisible\"\r\n                title=\"添加用户\"\r\n                width=\"600px\"\r\n        >\r\n            <el-form\r\n                    ref=\"ruleFormRef\"\r\n                    :model=\"ruleForm\"\r\n                    :rules=\"editRules\"\r\n                    label-width=\"120px\"\r\n                    class=\"demo-ruleForm\"\r\n                    :size=\"formSize\"\r\n            >\r\n                <el-form-item label=\"角色\" prop=\"role\">\r\n                    <el-radio-group v-model=\"ruleForm.role\">\r\n                        <el-radio label=\"教师\"></el-radio>\r\n                        <el-radio label=\"学生\"></el-radio>\r\n                    </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item label=\"姓名\" prop=\"name\">\r\n                    <el-input v-model=\"ruleForm.name\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"学号/工号\" prop=\"id\" ref=\"id\">\r\n                    <el-input v-model.number=\"ruleForm.id\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"身份证号\" prop=\"idNumber\" ref=\"idNumber\">\r\n                    <el-input v-model=\"ruleForm.idNumber\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"手机号\" prop=\"phoneNumber\">\r\n                    <el-input v-model.number=\"ruleForm.phoneNumber\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                <el-input v-model=\"ruleForm.email\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"submitForm(ruleFormRef)\" >添加</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n\r\n    </div>\r\n    </body>\r\n</template>\r\n\r\n<script>\r\n    import Nav from \"@/views/inc/Nav.vue\";\r\n    export default {\r\n        name: \"userManage\",\r\n        components:{\r\n            Nav\r\n        },\r\n        data(){\r\n            return{\r\n                dialogVisible:false,\r\n                ruleForm:{\r\n\r\n                },\r\n                editRules :({\r\n                    name: [\r\n                        { required: true, message: '请输入姓名', trigger: 'blur' },\r\n                    ],\r\n                    id: [\r\n                        {\r\n                            required: true,\r\n                            message: '请输入学号/工号',\r\n                            trigger: 'change',\r\n                        },\r\n                        { type:'number',message:'输入只能为数字'}\r\n                    ],\r\n                    idNumber: [\r\n                        {\r\n                            required: true,\r\n                            message: '请输入身份证号',\r\n                            trigger: 'change',\r\n                        },\r\n                    ],\r\n                    role: [\r\n                        {\r\n                            required: true,\r\n                            message: '请选择角色',\r\n                            trigger: 'blur',\r\n                        },\r\n                    ]\r\n                }),\r\n                tableData : [\r\n                    {\r\n                        role: '管理员',\r\n                        name: 'admin',\r\n                        id:'12345678901',\r\n                        idNumber:'123456789012345678',\r\n                        phoneNumber:'12345678901',\r\n                        email:'12345678901@fudan.edu.cn'\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        created(){\r\n\r\n        },\r\n\r\n        methods:{\r\n            getUserForm(){\r\n                this.$axios.get(\"/sys/menu/list\").then(res=>{\r\n                    this.tableData=res.data.data;\r\n                })\r\n            },\r\n            submitForm(formName){\r\n                this.$refs[formName].validate((valid)=>{\r\n                    if(valid){\r\n                        this.$axios.post('/sys/menu/'+(this.ruleForm.id?'update':'save'),this.ruleForm)\r\n                        .then(res=>{\r\n                            this.$message({\r\n                                showClose: true,\r\n                                message: '添加成功',\r\n                                type: 'success',\r\n                            });\r\n                            }\r\n                        )\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    @import \"../assets/css/userManage.css\";\r\n\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}
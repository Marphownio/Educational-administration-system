{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport Nav from \"@/views/inc/Nav.vue\";\nexport default {\n  name: \"userManage\",\n  components: {\n    Nav\n  },\n\n  data() {\n    return {\n      dialogVisible: false,\n      ruleForm: {},\n      editRules: {\n        name: [{\n          required: true,\n          message: '请输入姓名',\n          trigger: 'blur'\n        }, {\n          pattern: '^[a-zA-Z\\u4e00-\\u9fa5]+$',\n          message: '输入只能为中英文',\n          trigger: 'change'\n        }],\n        id: [{\n          required: true,\n          message: '请输入学号/工号',\n          trigger: 'blur'\n        }, {\n          type: 'number',\n          message: '输入只能为数字',\n          trigger: 'change'\n        }],\n        idNumber: [{\n          required: true,\n          message: '请输入身份证号',\n          trigger: 'blur'\n        }, {\n          pattern: '/(^\\\\d{15}$)|(^\\\\d{18}$)|(^\\\\d{17}(\\\\d|X|x)$)/',\n          message: '输入格式不正确，请检查输入',\n          trigger: 'blur'\n        }],\n        phoneNumber: [{\n          pattern: '^1[0-9]{10}$',\n          message: '请输入以1开头的11位数字',\n          trigger: 'blur'\n        }],\n        email: [{\n          pattern: '/^([a-zA-Z0-9]+[-_\\\\.]?)+@[a-zA-Z0-9]+\\\\.[a-z]+$/',\n          message: '邮箱格式不正确，请重新输入',\n          trigger: 'blur'\n        }],\n        role: [{\n          required: true,\n          message: '请选择角色',\n          trigger: 'blur'\n        }]\n      },\n      tableData: [{\n        role: '0',\n        name: 'admin',\n        id: '000000',\n        idNumber: '123456789012345678',\n        phoneNumber: '12345678901',\n        email: '12345678901@test.cn'\n      }]\n    };\n  },\n\n  created() {},\n\n  methods: {\n    getUserForm() {\n      this.$axios.get(\"/sys/menu/list\").then(res => {\n        this.tableData = res.data.data;\n      });\n    },\n\n    submitForm() {\n      this.$refs.ruleForm.validate(valid => {\n        if (valid) {\n          //this.$axios.post('/sys/menu/'+(this.ruleForm.id?'update':'save'),this.ruleForm)\n          //.then(res=>{\n          this.$message({\n            showClose: true,\n            message: '添加成功',\n            type: 'success',\n            onClose: () => {\n              this.getUserForm();\n            } //})\n\n          });\n        } else {\n          this.$nextTick(() => {\n            this.scrollToTop(this.$refs[formName].$el);\n          });\n        }\n      });\n    },\n\n    nameCheck() {\n      const relu = \"^[a-zA-Z\\u4e00-\\u9fa5]+$\";\n      const re = new RegExp(relu);\n\n      if (this.value.search(re) !== -1) {} else {\n        message: '输入只能为中英文！';\n      }\n    },\n\n    editHandle(id) {\n      this.$axios.get('/sys/menu/info/' + id).then(res => {\n        this.ruleForm = res.data.data;\n        this.dialogVisible = true;\n      });\n    },\n\n    scrollToTop(node) {\n      const ChildHasError = Array.from(node.querySelectorAll('.is-error'));\n      if (!ChildHasError.length) throw new Error('有错误，但是找不到错误位置');\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["Nav","name","components","data","dialogVisible","ruleForm","editRules","required","message","trigger","pattern","id","type","idNumber","phoneNumber","email","role","tableData","created","methods","getUserForm","$axios","get","then","res","submitForm","$refs","validate","valid","$message","showClose","onClose","$nextTick","scrollToTop","formName","$el","nameCheck","relu","re","RegExp","value","search","editHandle","node","ChildHasError","Array","from","querySelectorAll","length","Error"],"sourceRoot":"","sources":["E:\\Git\\Git\\ss2022_group16\\Lab3\\vueadmin-vue\\src\\views\\sys\\admin\\userManage.vue"],"sourcesContent":["<template>\r\n    <head>\r\n        <meta charset=\"UTF-8\">\r\n        <title>用户管理</title>\r\n    </head>\r\n    <body>\r\n    <Nav></Nav>\r\n    <div class=\"void\">\r\n        <span></span>\r\n    </div>\r\n    <div class=\"showlist\">\r\n        <el-form :inline=\"true\" >\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"dialogVisible=true\">添加</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n        <el-table :data=\"tableData\" >\r\n            <el-table-column fixed prop=\"id\" label=\"学号/工号\" width=\"120px\"/>\r\n            <el-table-column prop=\"role\" label=\"角色\" width=\"120px\" />\r\n            <el-table-column prop=\"name\" label=\"姓名\" width=\"120px\" />\r\n            <el-table-column prop=\"\" label=\"学院\" width=\"120px\"/>\r\n            <el-table-column prop=\"\" label=\"专业\" width=\"120px\"/>\r\n            <el-table-column prop=\"idNumber\" label=\"身份证号\" width=\"180px\"/>\r\n            <el-table-column prop=\"phoneNumber\" label=\"手机号\" width=\"120px\"/>\r\n            <el-table-column prop=\"email\" label=\"邮箱\" width=\"150px\"/>\r\n            <el-table-column prop=\"state\" label=\"状态\" width=\"120px\"/>\r\n            <el-table-column fixed=\"right\" prop=\"icon\" label=\"操作\" width=\"120px\">\r\n            <div>\r\n                <el-button type=\"text\" @click=\"editHandle(row.id)\">编辑</el-button>\r\n                <el-popconfirm title=\"确认删除吗？\">\r\n                    <template #reference>\r\n                        <el-button type=\"text\">删除</el-button>\r\n                    </template>\r\n                </el-popconfirm>\r\n            </div>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <el-dialog\r\n                v-model=\"dialogVisible\"\r\n                title=\"添加用户\"\r\n                width=\"600px\"\r\n        >\r\n            <el-form\r\n                    ref=\"ruleForm\"\r\n                    :model=\"ruleForm\"\r\n                    :rules=\"editRules\"\r\n                    label-width=\"120px\"\r\n                    class=\"demo-ruleForm\"\r\n                    :size=\"formSize\"\r\n            >\r\n                <el-form-item label=\"角色\" prop=\"role\">\r\n                    <el-radio-group v-model=\"ruleForm.role\">\r\n                        <el-radio label=\"教师\" model-value=\"1\"></el-radio>\r\n                        <el-radio label=\"学生\" model-value=\"2\"></el-radio>\r\n                    </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item label=\"学院\">\r\n                    <el-select >\r\n                        <el-option label=\"学院1\" value=\"shanghai\" />\r\n                        <el-option label=\"学院2\" value=\"beijing\" />\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"专业\">\r\n                    <el-select  >\r\n                        <el-option label=\"专业1\" value=\"shanghai\" />\r\n                        <el-option label=\"专业2\" value=\"beijing\" />\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"姓名\" prop=\"name\">\r\n                    <el-input v-model=\"ruleForm.name\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"学号/工号\" prop=\"id\" ref=\"id\">\r\n                    <el-input v-model.number=\"ruleForm.id\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"身份证号\" prop=\"idNumber\" ref=\"idNumber\">\r\n                    <el-input v-model=\"ruleForm.idNumber\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"手机号\" prop=\"phoneNumber\">\r\n                    <el-input v-model=\"ruleForm.phoneNumber\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                <el-input v-model=\"ruleForm.email\"></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"submitForm\" >添加</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n\r\n    </div>\r\n    </body>\r\n</template>\r\n\r\n<script>\r\n    import Nav from \"@/views/inc/Nav.vue\";\r\n    export default {\r\n        name: \"userManage\",\r\n        components:{\r\n            Nav\r\n        },\r\n        data(){\r\n            return{\r\n                dialogVisible:false,\r\n                ruleForm:{\r\n                },\r\n                editRules :({\r\n                    name: [\r\n                        { required: true, message: '请输入姓名', trigger: 'blur' },\r\n                        {pattern:'^[a-zA-Z\\u4e00-\\u9fa5]+$',message: '输入只能为中英文',trigger: 'change'}\r\n                    ],\r\n                    id: [\r\n                        {\r\n                            required: true,\r\n                            message: '请输入学号/工号',\r\n                            trigger: 'blur',\r\n                        },\r\n                        { type:'number',message:'输入只能为数字',trigger: 'change'}\r\n                    ],\r\n                    idNumber: [\r\n                        {\r\n                            required: true,\r\n                            message: '请输入身份证号',\r\n                            trigger: 'blur',\r\n                        },\r\n                        {pattern:'/(^\\\\d{15}$)|(^\\\\d{18}$)|(^\\\\d{17}(\\\\d|X|x)$)/',message:'输入格式不正确，请检查输入',trigger: 'blur'}\r\n                    ],\r\n                    phoneNumber:[\r\n                        {pattern:'^1[0-9]{10}$',message:'请输入以1开头的11位数字',trigger:'blur',}\r\n                    ],\r\n                    email:[\r\n                        {pattern:'/^([a-zA-Z0-9]+[-_\\\\.]?)+@[a-zA-Z0-9]+\\\\.[a-z]+$/',message:'邮箱格式不正确，请重新输入',trigger:'blur',}\r\n                    ],\r\n                    role: [\r\n                        {\r\n                            required: true,\r\n                            message: '请选择角色',\r\n                            trigger: 'blur',\r\n                        },\r\n                    ]\r\n                }),\r\n                tableData : [\r\n                    {\r\n                        role: '0',\r\n                        name: 'admin',\r\n                        id:'000000',\r\n                        idNumber:'123456789012345678',\r\n                        phoneNumber:'12345678901',\r\n                        email:'12345678901@test.cn'\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        created(){\r\n\r\n        },\r\n\r\n        methods:{\r\n            getUserForm(){\r\n                this.$axios.get(\"/sys/menu/list\").then(res=>{\r\n                    this.tableData=res.data.data;\r\n                })\r\n            },\r\n            submitForm(){\r\n                this.$refs.ruleForm.validate(valid=>{\r\n                    if(valid){\r\n                        //this.$axios.post('/sys/menu/'+(this.ruleForm.id?'update':'save'),this.ruleForm)\r\n                        //.then(res=>{\r\n                            this.$message({\r\n                                showClose: true,\r\n                                message: '添加成功',\r\n                                type: 'success',\r\n                                onClose:()=>{\r\n                                    this.getUserForm()\r\n                                }\r\n                            //})\r\n                            }\r\n                        )\r\n                    }\r\n                    else{\r\n                        this.$nextTick(() => {\r\n                            this.scrollToTop(this.$refs[formName].$el)\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n            nameCheck () {\r\n                const relu = \"^[a-zA-Z\\u4e00-\\u9fa5]+$\";\r\n                const re = new RegExp(relu);\r\n                if (this.value.search(re) !== -1){\r\n                } else {\r\n                    message:'输入只能为中英文！'\r\n                }\r\n            },\r\n            editHandle(id){\r\n                this.$axios.get('/sys/menu/info/'+id).then(res=>{\r\n                    this.ruleForm=res.data.data;\r\n                    this.dialogVisible=true;\r\n                })\r\n            },\r\n            scrollToTop (node) {\r\n                const ChildHasError = Array.from(node.querySelectorAll('.is-error'))\r\n                if (!ChildHasError.length) throw new Error('有错误，但是找不到错误位置')\r\n            }\r\n        }\r\n    }\r\n\r\n</script>\r\n\r\n<style>\r\n    @import \"../../../assets/css/userManage.css\";\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}